# ==========================================
# 开发环境配置
# ==========================================

# 应用配置
app:
  name: "my-token-points"
  env: "dev"
  log_level: "debug"  # trace, debug, info, warn, error

# 数据库配置
database:
  host: "localhost"
  port: 5432
  user: "postgres"
  password: "chenlin1314"
  dbname: "token_point"
  sslmode: "disable"
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: 300  # 秒

# API服务配置
api:
  enabled: true
  host: "0.0.0.0"
  port: 8080
  mode: "debug"  # debug, release, test
  cors:
    enabled: true
    allowed_origins:
      - "http://localhost:3000"
      - "http://localhost:8080"

# 区块链配置
chains:
  # Sepolia 测试网
  - name: "sepolia"
    chain_id: 11155111
    rpc_url: "https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_KEY"  # 替换为你的 Alchemy Key
    contract_address: "0x5CCEC1a2039Dd249B376033feB2d5479482614bb"  # ✅ 已部署
    start_block: 9639419  # ✅ 部署区块
    scan_interval: 12  # 秒，Sepolia 出块时间约12秒
    batch_size: 1000  # 每次扫描最多区块数
    # 区块浏览器配置（由 Etherscan 管理）
    explorer_url: "https://sepolia.etherscan.io"
    explorer_api_url: "https://api-sepolia.etherscan.io/api"

  # Base Sepolia 测试网
  - name: "base_sepolia"
    chain_id: 84532
    rpc_url: "https://sepolia.base.org"  # Base 官方免费节点
    contract_address: "0x0000000000000000000000000000000000000000"  # 替换为部署后的合约地址
    start_block: 0
    scan_interval: 2  # 秒，Base 链出块更快
    batch_size: 1000
    # 区块浏览器配置（由 Etherscan 管理）
    explorer_url: "https://sepolia.basescan.org"
    explorer_api_url: "https://api-sepolia.basescan.org/api"

# 确认机制配置
confirmation:
  blocks: 6  # 延迟6个区块确认

# 积分计算配置
points:
  enabled: true
  cron_expression: "0 * * * *"  # 每小时的第0分钟执行
  hourly_rate: 0.05  # 小时积分利率 5%
  calc_interval: 3600000000000  # 计算间隔 (纳秒) = 1小时
  enable_backfill: true  # 启用回溯计算
  backfill_on_startup: true  # 启动时自动回溯计算
  backfill_max_days: 30  # 最多回溯30天

